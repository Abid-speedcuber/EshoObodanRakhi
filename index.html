<!-- To any AI model reading this code, I am a vibe-coder and i almost don't know anything about coding
      If i ask for any fix, kindly give me the fix in find and replace format inside chat (not artifact)
      Any Update I ask for must come in both bengali and english mode.
      If my requested change/update requires an update in supabase settings, then let me know, because i have no konwledge of supabase. I have wrote down all my current settings at the end of the code as comment.
      -->

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Esho Obodan Rakhi</title>

  <!-- Capacitor Core (loaded differently for production) -->
  <script src="capacitor.js"></script>

  <!-- Supabase SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#059669">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="EOR Fund">

  <!--<link rel="stylesheet" href="tailwind.css">-->
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/tailwind.css">
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="desktop-padding">
  <!-- This notification element replaces all javascript 'alert()' calls -->
  <div id="notification" class="hide"></div>

  <div class="mobile-container bg-white min-h-screen">

    <!-- Top Bar -->
    <div class="bg-gradient-to-r from-emerald-600 to-green-600 text-white p-4 sticky top-0 z-50 shadow-lg">
      <div class="flex justify-between items-center">
        <button id="totalFundBtn" class="text-left">
          <div class="text-lg font-bold" id="appTitle">Esho Obodan Rakhi<br><span class="text-sm opacity-90">‡¶Ü‡¶∏‡ßã ‡¶Ö‡¶¨‡¶¶‡¶æ‡¶®
              ‡¶∞‡¶æ‡¶ñ‡¶ø</span></div>
          <div class="text-xs opacity-90 underline decoration-2 underline-offset-2" id="totalFundDisplay">‡ß≥ 0</div>
        </button>
        <div class="flex items-center gap-2">
          <button id="loginTopBtn"
            class="bg-white text-green-600 px-3 py-2 rounded-lg font-semibold text-sm hover:bg-green-50 transition hide flex items-center h-10">Login</button>          
          <button id="userMenuBtn"
            class="bg-white text-green-600 px-3 py-2 rounded-lg font-semibold text-sm hover:bg-green-50 transition hide flex items-center h-10">Menu</button>
          <button id="adminMenuBtn"
            class="bg-white text-green-600 px-3 py-2 rounded-lg font-semibold text-sm hover:bg-green-50 transition hide flex items-center h-10">Admin</button>
          <button id="talibMenuBtn"
            class="bg-white text-green-600 px-3 py-2 rounded-lg font-semibold text-sm hover:bg-green-50 transition hide flex items-center h-10">Menu</button>
          <button id="refreshBtn"
            class="bg-white text-green-600 px-3 py-2 rounded-lg font-semibold text-sm hover:bg-green-50 transition flex items-center h-10"><img
              src="svgs/icon-refresh.svg"></button>
          <button id="settingsBtn"
            class="bg-white text-green-600 px-3 py-2 rounded-lg font-semibold text-sm hover:bg-green-50 transition flex items-center h-10"><img
              src="svgs/icon-settings.svg"></button>
        </div>
      </div>
    </div>

<!-- Main Navigation -->
<div class="flex gap-2 p-4 bg-green-50">
  <button data-section="fund" class="nav-btn bg-white p-4 rounded-xl shadow hover:shadow-lg transition text-center flex-1">
    <div class="text-3xl mb-1" style="justify-items: center;"><img src="svgs/icon-fund.svg" style="
      height: 45px;
      width: 45px;
      "></div>
    <div class="text-sm font-semibold text-gray-700">Fund History</div>
  </button>
  <button data-section="blood"
    class="nav-btn bg-white p-4 rounded-xl shadow hover:shadow-lg transition text-center flex-1">
    <div class="text-3xl mb-1" style="justify-items: center;"><img src="svgs/blood-donation-icon.svg"
        style="height: 45px; width: 45px;"></div>
    <div class="text-sm font-semibold text-gray-700">Blood Donors</div>
  </button>
  <button data-section="notices"
    class="nav-btn bg-white p-4 rounded-xl shadow hover:shadow-lg transition text-center flex-0 hide">
    <div class="text-3xl mb-1" style="justify-items: center;"><img src="svgs/announcement-icon.svg"
        style="height: 45px; width: 45px;"></div>
    <div class="text-sm font-semibold text-gray-700">Activities</div>
  </button>
</div>

    <!-- Main content area where sections will be displayed -->
    <main id="mainContent" class="p-4">
      <!-- Fund History Section -->
      <div id="fundSection" class="section hide">
        <!-- Fund Tabs (Non-Admin Only) -->
        <div id="fundTabs" class="grid grid-cols-2 gap-2 p-4 bg-green-50 hide">
          <button id="collectionTabBtn"
            class="fund-tab-btn bg-white p-3 rounded-xl shadow hover:shadow-lg transition text-center">
            <div class="text-sm font-semibold text-gray-700">Collection</div>
            <div class="text-xs text-green-700 font-bold mt-1" id="collectionTabTotal">‡ß≥ 0</div>
            <div class="text-xs text-gray-500" id="collectionTabMonth">‡ß≥ 0 this month</div>
          </button>
<button id="sadakahTabBtn"
  class="fund-tab-btn bg-white p-3 rounded-xl shadow hover:shadow-lg transition text-center">
  <div class="text-sm font-semibold text-gray-700">Sadakah</div>
  <div class="text-xs text-red-700 font-bold mt-1" id="sadakahTabTotal">‡ß≥ 0</div>
  <div class="text-xs text-gray-500" id="sadakahTabCount">‡ß≥ 0 from fund</div>
</button>
        </div>

        <!-- Collection View (default for non-admin) -->
        <!-- Month Navigation - Static (doesn't slide) -->
        <div id="monthNavigation" class="bg-white rounded-xl shadow-lg p-3 mb-3 month-nav-static">
          <div class="flex justify-between items-center mb-2">
            <button id="prevMonthBtn" class="bg-white text-green-700 px-2 py-1 rounded-lg font-semibold"><img
                src="svgs/icon-previous.svg"></button>
            <div style="flex: 1; overflow: hidden; position: relative;">
              <h2 id="currentMonthDisplay" class="text-base font-bold text-gray-800" style="text-align: center; transition: transform 0.3s ease;"></h2>
            </div>
            <button id="nextMonthBtn" class="bg-white text-green-700 px-2 py-1 rounded-lg font-semibold"><img
                src="svgs/icon-next.svg"></button>
          </div>
          <div id="adminControls" class="hide mb-2 text-center">
            <button data-modal="addIncomeModal" class="bg-green-600 text-white px-4 py-2 rounded-lg mr-2 text-sm"
              id="addIncomeBtn">+Collection</button>
            <button data-modal="addExpenseModal" class="bg-red-600 text-white px-4 py-2 rounded-lg text-sm"
              id="addExpenseBtn">+Sadakah</button>
          </div>
        </div>
        
        <!-- Sliding Content Container -->
        <div id="collectionView" class="month-view-container">
          <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
            <div class="flex justify-between items-center mb-3">
              <h3 class="text-lg font-bold text-green-700">Collection</h3>
              <button id="copyIncomeBtn"
                class="bg-green-100 text-green-700 px-3 py-2 rounded-lg text-sm font-semibold hover:bg-green-200 transition">
                <img src="svgs/icon-copy.svg"> Copy List
              </button>
            </div>
            <div class="mb-3 pb-3 border-b border-gray-200">
              <div class="text-sm text-gray-700">
                <div id="donationInfoText" class="font-semibold mb-2">You can also contribute by donating to:</div>
                <div class="space-y-1">
                  <div class="cursor-pointer hover:text-green-600 transition" data-copy-number="+880 1937-222273"><span
                      class="underline">+880 1937-222273</span> - nogod</div>
                  <div class="cursor-pointer hover:text-green-600 transition" data-copy-number="+880 1515-214867"><span
                      class="underline">+880 1515-214867</span> - bkash</div>
                </div>
              </div>
            </div>
            <div id="incomeList" class="space-y-2"></div>
            <div class="mt-3 pt-3 border-t border-gray-200">
              <div class="flex justify-between font-bold text-green-700">
                <span>Total Collection:</span>
                <span id="totalIncome">‡ß≥ 0</span>
              </div>
            </div>
          </div>
          <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
            <h3 class="text-lg font-bold text-red-700 mb-3">Sadakah</h3>
            <div id="expenseList" class="space-y-2"></div>
            <div class="mt-3 pt-3 border-t border-gray-200">
              <div class="flex justify-between font-bold text-red-700">
                <span>Total Sadakah:</span>
                <span id="totalExpense">‡ß≥ 0</span>
              </div>
            </div>
          </div>
          <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
            <div class="flex justify-between items-center mb-3">
              <span class="font-bold text-gray-700">Monthly economy:</span>
              <span id="monthlyBalance" class="text-xl font-bold">‡ß≥ 0</span>
            </div>
            <div class="flex justify-between items-center pt-3 border-t border-gray-200">
              <span class="font-bold text-blue-700">Net worth at month end:</span>
              <span id="netWorth" class="text-xl font-bold text-blue-700">‡ß≥ 0</span>
            </div>
          </div>
          <div class="bg-white rounded-xl shadow-lg p-4 text-center" style="justify-items:center;">
            <button id="showYearlyChartBtn"
              class="bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition flex items-center justify-center gap-2">
              <img src="svgs/overview-icon.svg" style="width: 20px; height: 20px;"> View Yearly Overview
            </button>
          </div>
        </div>

        <!-- Sadakah List View (Non-Admin Only) -->
        <div id="sadakahListView" class="hide">
          <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
            <h3 class="text-lg font-bold text-red-700 mb-3">All Sadakah History</h3>
            <div id="allSadakahList" class="space-y-3"></div>
            <div class="mt-4 pt-4 border-t border-gray-200">
              <div class="text-sm text-gray-700">
                <div id="sadakahDonationInfoText" class="font-semibold mb-2">You can also contribute by donating to:
                </div>
                <div class="space-y-1">
                  <div class="cursor-pointer hover:text-green-600 transition" data-copy-number="+880 1937-222273"><span
                      class="underline">+880 1937-222273</span> - nogod</div>
                  <div class="cursor-pointer hover:text-green-600 transition" data-copy-number="+880 1515-214867"><span
                      class="underline">+880 1515-214867</span> - bkash</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Blood Donors Section -->
      <div id="bloodSection" class="section hide">
        <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-bold text-gray-800">Blood Donors</h2>
            <button id="myDonorBtn" class="bg-green-600 text-white px-3 py-2 rounded-lg text-sm hide">My
              Profile</button>
          </div>
          <div id="donorPromptMessage"
            class="hide bg-blue-50 border-l-4 border-blue-500 p-3 text-sm text-blue-800 mb-4">
            To be a blood donor, click on "My Profile" and add your phone number and location.
          </div>
        </div>
        <div id="bloodFilterContainer" class="bg-white rounded-xl shadow-lg p-4 mb-4">
          <div class="flex items-center gap-2">
            <select id="bloodFilter" class="flex-1 p-3 border border-gray-300 rounded-lg">
              <option value="all">All Blood Groups</option>
              <option value="A+">A+</option>
              <option value="A-">A-</option>
              <option value="B+">B+</option>
              <option value="B-">B-</option>
              <option value="O+">O+</option>
              <option value="O-">O-</option>
              <option value="AB+">AB+</option>
              <option value="AB-">AB-</option>
            </select>
            <input type="text" id="bloodSearch" placeholder="Search donors..."
              class="hide flex-1 p-3 border border-gray-300 rounded-lg">
            <button id="bloodSearchBtn"
              class="bg-green-600 text-white p-3 rounded-lg hover:bg-green-700 transition flex-shrink-0">
              <img src="svgs/icon-search.svg" alt="Search" style="width: 20px; height: 20px;">
            </button>
            <button id="bloodClearBtn"
              class="hide bg-white text-white p-3 rounded-lg hover:bg-gray-100 transition flex-shrink-0">
              <img src="svgs/icon-close.svg" alt="Clear" style="width: 20px; height: 20px;">
            </button>
          </div>
        </div>
        <div id="donorsList" class="space-y-3"></div>
      </div>

      <!-- Notices Section -->
      <div id="noticesSection" class="section hide">
        <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
          <h2 class="text-xl font-bold text-gray-800 mb-3">Fund Activities</h2>
          <button id="postNoticeBtn" data-modal="postNoticeModal"
            class="bg-green-600 text-white px-4 py-2 rounded-lg w-full hide">Post Activity</button>
        </div>
        <div id="noticesList" class="space-y-4"></div>
      </div>

      <!-- Notifications Section -->
      <div id="notificationsSection" class="section hide">
        <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
          <div class="flex justify-between items-center mb-3">
            <h2 class="text-xl font-bold text-gray-800">Notifications</h2>
            <button id="createNotificationBtn" class="bg-purple-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-purple-700 transition hide">
              + New Notification
            </button>
          </div>
        </div>
        <div id="notificationsList" class="space-y-3"></div>
      </div>

      <!-- User Messages Section (for regular users) -->
      <div id="userMessagesSection" class="section hide">
        <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
          <div class="flex justify-between items-center mb-3">
            <h2 class="text-xl font-bold text-gray-800">My Messages</h2>
            <button id="composeNewMessageBtn" class="bg-purple-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-purple-700 transition">
              ‚úâÔ∏è New Message
            </button>
          </div>
          <div id="messageCooldownWarning" class="hide bg-yellow-50 border-l-4 border-yellow-500 p-3 text-sm text-yellow-800 mt-3">
            <span id="cooldownText"></span>
          </div>
        </div>
        <div id="userMessagesList" class="space-y-3"></div>
      </div>

      <!-- Admin Messages Section -->
      <div id="adminMessagesSection" class="section hide">
        <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
          <h2 class="text-xl font-bold text-gray-800 mb-3">User Messages</h2>
          <div class="flex gap-2">
            <button class="admin-message-tab bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 transition flex-1" data-tab="unread">
              Unread
            </button>
            <button class="admin-message-tab bg-white text-blue-600 px-4 py-2 rounded-lg font-semibold hover:bg-blue-50 transition flex-1 border border-blue-600" data-tab="read">
              Read
            </button>
            <button class="admin-message-tab bg-white text-blue-600 px-4 py-2 rounded-lg font-semibold hover:bg-blue-50 transition flex-1 border border-blue-600" data-tab="replied">
              Replied
            </button>
          </div>
        </div>
        <div id="adminMessagesList" class="space-y-3"></div>
      </div>

<!-- Notes Section -->
<div id="notesSection" class="section hide">
  <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
    <div class="flex justify-between items-center mb-3">
      <div class="flex items-center gap-2">
        <h2 class="text-xl font-bold text-gray-800">Notes</h2>
        <button id="notesFormattingGuideBtn" class="bg-gray-200 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold hover:bg-gray-300 transition" title="Formatting Guide">
          <span class="text-gray-600">i</span>
        </button>
      </div>
      <div class="flex gap-2">
        <button id="createBackupBtn" class="bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 transition hide" title="Backup to Cloud">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/></svg>
        </button>
        <button id="exportNotesBtn" class="bg-purple-600 text-white p-2 rounded-lg hover:bg-purple-700 transition" title="Export to File">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
        </button>
        <button id="importNotesBtn" class="bg-orange-600 text-white p-2 rounded-lg hover:bg-orange-700 transition" title="Import from File">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
        </button>
        <input type="file" id="importNotesFile" accept=".json" class="hide">
        <button id="createNoteBtn" class="bg-green-600 text-white p-2 rounded-lg hover:bg-green-700 transition" title="New Note">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        </button>
      </div>
    </div>

    <div id="notesLastSync" class="text-xs text-gray-500 text-center"></div>
  </div>

  <div id="notesList" class="space-y-3"></div>
</div>
    </main>

    <!-- All Modals -->
    <div id="loginModal" class="modal hide">
      <div class="modal-content">
        <h2 class="text-2xl font-bold mb-4 text-gray-800">Login</h2>
        <form id="loginForm">
          <input type="email" id="loginEmail" placeholder="Email" class="modal-input" required>
          <div class="relative mb-4">
            <input type="password" id="loginPassword" placeholder="Password" class="modal-input mb-0" required>
            <button type="button" id="toggleLoginPassword"
              class="absolute right-3 top-3 text-gray-500 hover:text-gray-700">
              <img src="svgs/icon-eye.svg" id="loginEyeIcon" style="width: 20px; height: 20px;" alt="Show password">
            </button>
          </div>
          <button id="forgotPasswordBtn" type="button"
            class="w-full text-right text-orange-600 font-semibold text-sm mb-3">Forgot Password?</button>
          <button type="submit" class="w-full bg-green-600 text-white py-3 rounded-lg font-semibold mb-4">Login</button>
        </form>

        <!-- OR Divider -->
        <div class="flex items-center gap-3 mb-4">
          <div class="flex-1 h-px bg-gray-300"></div>
          <span class="text-gray-500 text-sm">or</span>
          <div class="flex-1 h-px bg-gray-300"></div>
        </div>

        <!-- START: Continue with Google button -->
        <button id="googleLoginBtn" type="button"
          class="w-full bg-white border border-gray-300 py-3 rounded-lg font-semibold mb-4 flex items-center justify-center gap-3 hover:bg-gray-50 transition">
          <img src="svgs/icon-google.svg" alt="G" style="width:18px;height:18px;">
          <span>Continue with Google</span>
        </button>
        <!-- END: Continue with Google button -->

        <button id="showSignupBtn" class="w-full text-blue-600 py-2 font-semibold">Don't have an account? Sign
          up</button>
        <button data-close-modal class="w-full mt-2 text-gray-600 py-2">Cancel</button>
      </div>
    </div>

    <div id="signupModal" class="modal hide">
      <div class="modal-content">
        <h2 class="text-2xl font-bold mb-4 text-gray-800">Sign Up</h2>
        <form id="signupForm">
          <input type="text" id="signupName" placeholder="Full Name" class="modal-input" required>
          <input type="email" id="signupEmail" placeholder="Email" class="modal-input" required>
          <div class="relative mb-3">
            <input type="password" id="signupPassword" placeholder="Password" class="modal-input mb-0" required>
            <button type="button" id="toggleSignupPassword"
              class="absolute right-3 top-3 text-gray-500 hover:text-gray-700">
              <img src="svgs/icon-eye.svg" id="signupEyeIcon" style="width: 20px; height: 20px;" alt="Show password">
            </button>
          </div>
          <div class="relative mb-4">
            <input type="password" id="signupConfirmPassword" placeholder="Confirm Password" class="modal-input mb-0"
              required>
            <button type="button" id="toggleSignupConfirmPassword"
              class="absolute right-3 top-3 text-gray-500 hover:text-gray-700">
              <img src="svgs/icon-eye.svg" id="signupConfirmEyeIcon" style="width: 20px; height: 20px;"
                alt="Show password">
            </button>
          </div>
          <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold mb-3">Sign
            Up</button>
        </form>
        <button id="showLoginBtn" class="w-full text-green-600 py-2 font-semibold">Already have an account?
          Login</button>
        <button data-close-modal class="w-full mt-2 text-gray-600 py-2">Cancel</button>
      </div>
    </div>

    <div id="forgotPasswordModal" class="modal hide">
      <div class="modal-content">
        <h2 class="text-2xl font-bold mb-4 text-gray-800">Forgot Password</h2>
        <p class="text-sm text-gray-600 mb-4">Enter your email address and we'll send you a password reset link.</p>
        <form id="forgotPasswordForm">
          <input type="email" id="forgotEmail" placeholder="Email" class="modal-input mb-4" required>
          <button type="submit" class="w-full bg-orange-600 text-white py-3 rounded-lg font-semibold mb-3">Send Reset
            Link</button>
        </form>
        <button id="backToLoginBtn" class="w-full text-green-600 py-2 font-semibold">Back to Login</button>
        <button data-close-modal class="w-full mt-2 text-gray-600 py-2">Cancel</button>
      </div>
    </div>

    <div id="addIncomeModal" class="modal hide">
      <div class="modal-content">
        <h2 class="text-xl font-bold mb-4 text-gray-800">Add Collection</h2>
        <form id="addIncomeForm">
          <input type="hidden" id="incomeId">
          <input type="text" id="incomeName" placeholder="Donor Name" class="modal-input" required>
          <input type="number" id="incomeAmount" placeholder="Amount (‡ß≥)" class="modal-input" required>
          <label class="flex items-center mb-4 cursor-pointer">
            <input type="checkbox" id="incomeHighlighted" class="mr-2 w-5 h-5">
            <span class="text-gray-700">Highlight this entry</span>
          </label>
          <div class="flex gap-2">
            <button type="submit" class="flex-1 bg-green-600 text-white py-3 rounded-lg font-semibold">Add</button>
            <button type="button" data-close-modal
              class="flex-1 bg-gray-400 text-white py-3 rounded-lg font-semibold">Cancel</button>
          </div>
        </form>
      </div>
    </div>

    <div id="addExpenseModal" class="modal hide">
      <div class="modal-content">
        <h2 class="text-xl font-bold mb-4 text-gray-800">Add Sadakah</h2>
        <form id="addExpenseForm">
          <input type="hidden" id="expenseId">
          <input type="text" id="expenseDesc" placeholder="Title" class="modal-input" required>
          <input type="number" id="expenseAmount" placeholder="Amount (‡ß≥)" class="modal-input" required>
          <textarea id="expenseAdditionalInfo" placeholder="Additional info (optional)"
            class="modal-input h-24"></textarea>
<div class="mb-4">
  <button type="button" id="advancedOptionsToggle" class="text-sm text-blue-600 hover:text-blue-700 font-semibold flex items-center gap-1">
    <span>Advanced Options</span>
    <span id="advancedArrow">‚ñº</span>
  </button>
  <div id="advancedOptions" class="mt-3 p-3 bg-gray-50 rounded-lg hide" style="display: none;">
  <div class="space-y-3">
    <div class="flex items-center justify-between">
      <span class="text-sm text-gray-700">Highlight</span>
      <label class="switch">
        <input type="checkbox" id="expenseHighlighted">
        <span class="slider"></span>
      </label>
    </div>
    <div class="flex items-center justify-between">
      <span class="text-sm text-gray-700">Show in Sadakah Tab</span>
      <label class="switch">
        <input type="checkbox" id="expenseDisplay" checked>
        <span class="slider"></span>
      </label>
    </div>
    <div class="flex items-center justify-between">
      <span class="text-sm text-gray-700">Include in Calculations</span>
      <label class="switch">
        <input type="checkbox" id="expenseCalculation" checked>
        <span class="slider"></span>
      </label>
    </div>
  </div>
</div>
</div>
          <div class="flex gap-2">
            <button type="submit" class="flex-1 bg-red-600 text-white py-3 rounded-lg font-semibold">Add</button>
            <button type="button" data-close-modal
              class="flex-1 bg-gray-400 text-white py-3 rounded-lg font-semibold">Cancel</button>
          </div>
        </form>
      </div>
    </div>

    <div id="donorProfileModal" class="modal hide">
      <div class="modal-content">
        <h2 class="text-xl font-bold mb-4 text-gray-800">My Donor Profile</h2>
        <form id="donorProfileForm">
          <input type="hidden" id="donorId">
          <input type="text" id="donorName" placeholder="Full Name" class="modal-input" required>
          <input type="tel" id="donorPhone" placeholder="Phone Number" class="modal-input" required>
          <select id="donorBloodGroup" class="modal-input" required>
            <option value="" disabled selected>Select Blood Group</option>
            <option value="A+">A+</option>
            <option value="A-">A-</option>
            <option value="B+">B+</option>
            <option value="B-">B-</option>
            <option value="O+">O+</option>
            <option value="O-">O-</option>
            <option value="AB+">AB+</option>
            <option value="AB-">AB-</option>
          </select>
          <input type="text" id="donorLocation" placeholder="Location" class="modal-input" required>
          <label class="flex items-center mb-4 cursor-pointer">
            <input type="checkbox" id="donorAvailable" class="mr-2 w-5 h-5">
            <span class="text-gray-700">Available to donate</span>
          </label>
          <div class="mb-4">
            <label class="flex items-center mb-2 cursor-pointer">
              <input type="checkbox" id="donorHasLastDonated" class="mr-2 w-5 h-5">
              <span class="text-gray-700">Has donated before</span>
            </label>
            <input type="date" id="donorLastDonated" class="modal-input hide" placeholder="Last donation date">
          </div>
          <div class="flex gap-2">
            <button type="submit" class="flex-1 bg-green-600 text-white py-3 rounded-lg font-semibold">Save</button>
            <button type="button" id="deleteDonorBtn"
              class="bg-red-600 text-white px-4 py-3 rounded-lg font-semibold hide">Delete</button>
          </div>
          <button type="button" data-close-modal class="w-full mt-3 text-gray-600 py-2">Cancel</button>
        </form>
      </div>
    </div>

    <div id="postNoticeModal" class="modal hide">
      <div class="modal-content">
        <h2 class="text-xl font-bold mb-4 text-gray-800">Post Activity</h2>
        <form id="postNoticeForm">
          <input type="hidden" id="noticeId">
          <textarea id="noticeText" placeholder="What's happening?" class="modal-input h-32" required></textarea>
          <div class="flex gap-2 mt-4">
            <button type="submit" class="flex-1 bg-green-600 text-white py-3 rounded-lg font-semibold">Post</button>
            <button type="button" data-close-modal
              class="flex-1 bg-gray-400 text-white py-3 rounded-lg font-semibold">Cancel</button>
          </div>
        </form>
      </div>
    </div>

    <div id="yearlyChartModal" class="modal hide">
      <div class="modal-content" style="max-width: 480px; max-height: 90vh; overflow-y: auto;">
        <h2 class="text-xl font-bold mb-4 text-gray-800">Yearly Overview</h2>
        <div class="flex justify-between items-center mb-3">
          <button id="prevYearBtn"
            class="bg-blue-100 text-blue-700 px-3 py-1 rounded-lg text-sm font-semibold">‚Üê</button>
          <h3 class="text-lg font-bold text-gray-800"><span id="currentYearDisplay"></span></h3>
          <button id="nextYearBtn"
            class="bg-blue-100 text-blue-700 px-3 py-1 rounded-lg text-sm font-semibold">‚Üí</button>
        </div>
        <canvas id="yearlyChart" width="1000" height="1000" class="w-full"></canvas>
        <div class="flex justify-center gap-6 mt-3 text-sm">
          <div class="flex items-center">
            <div class="w-4 h-4 bg-green-500 rounded mr-2"></div><span>Collection</span>
          </div>
          <div class="flex items-center">
            <div class="w-4 h-4 bg-red-500 rounded mr-2"></div><span>Sadakah</span>
          </div>
          <div class="flex items-center">
            <div class="w-4 h-4 bg-blue-500 rounded mr-2"></div><span>Total Fund</span>
          </div>
        </div>
        <button type="button" data-close-modal
          class="w-full mt-4 bg-gray-400 text-white py-3 rounded-lg font-semibold">Close</button>
      </div>
    </div>

    <div id="completeHistoryModal" class="modal hide">
      <div class="modal-content" style="max-width: 480px; max-height: 90vh; overflow-y: auto;">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-xl font-bold text-gray-800">‡¶´‡¶æ‡¶®‡ßç‡¶°‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶§‡¶•‡ßç‡¶Ø</h2>
          <button id="copyHistoryBtn"
            class="bg-green-400 text-black px-4 py-2 rounded-lg text-sm font-semibold hover:bg-green-500 transition flex items-center gap-1">
            <img src="svgs/icon-copy.svg"> Copy
          </button>
        </div>
        <div class="flex items-center justify-between mb-3 bg-gray-100 p-3 rounded-lg">
          <span class="text-sm font-semibold text-gray-700">History Mode:</span>
          <button id="historyModeToggle"
            class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-blue-700 transition">
            Yearly Brief
          </button>
        </div>
        <div id="completeHistoryContent" class="text-sm text-gray-700 space-y-2 mb-4"></div>
        <button type="button" data-close-modal
          class="w-full bg-gray-400 text-white py-3 rounded-lg font-semibold">Close</button>
      </div>
    </div>

  </div>

  <!-- User Menu Modal -->
  <div id="userMenuModal" class="modal hide">
    <div class="modal-content">
      <h2 class="text-xl font-bold mb-4 text-gray-800">Menu</h2>
      <div class="space-y-2">
        <button id="userNotesBtn"
          class="w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition text-left px-4">
          üìù Notes
        </button>
        <button id="userNotificationsBtn"
          class="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition text-left px-4">
          üîî Notifications
        </button>
        <button id="messageAdminBtn"
          class="w-full bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700 transition text-left px-4 relative">
          üí¨ Message Admin
          <span id="messageAdminBadge" class="absolute top-2 right-2 w-3 h-3 bg-red-500 rounded-full hide"></span>
        </button>
      </div>
      <button data-close-modal class="w-full mt-4 bg-gray-400 text-white py-3 rounded-lg font-semibold">Close</button>
    </div>
  </div>

  <!-- Talib Menu Modal -->
  <div id="talibMenuModal" class="modal hide">
    <div class="modal-content">
      <h2 class="text-xl font-bold mb-4 text-gray-800">Menu</h2>
      <div class="space-y-2">
        <button id="talibNotesBtn"
          class="w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition text-left px-4">
          üìù Notes
        </button>
        <button id="talibNotificationsBtn"
          class="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition text-left px-4">
          üîî Notifications
        </button>
        <button id="talibMessageAdminBtn"
          class="w-full bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700 transition text-left px-4 relative">
          üí¨ Message Admin
          <span id="talibMessageAdminBadge" class="absolute top-2 right-2 w-3 h-3 bg-red-500 rounded-full hide"></span>
        </button>
      </div>
      <button data-close-modal class="w-full mt-4 bg-gray-400 text-white py-3 rounded-lg font-semibold">Close</button>
    </div>
  </div>

  <!-- Admin Menu Modal -->
  <div id="adminMenuModal" class="modal hide">
    <div class="modal-content">
      <h2 class="text-xl font-bold mb-4 text-gray-800">Admin Menu</h2>
      <div class="space-y-2">
        <button id="adminUsersBtn"
          class="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition text-left px-4">
          üë• Users
        </button>
        <button id="adminNotesBtn"
          class="w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition text-left px-4">
          üìù Notes
        </button>
        <button id="adminNotificationsBtn"
          class="w-full bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700 transition text-left px-4">
          üîî Notifications
        </button>
        <button id="adminMessagesBtn"
          class="w-full bg-orange-600 text-white py-3 rounded-lg font-semibold hover:bg-orange-700 transition text-left px-4 relative">
          üí¨ User Messages
          <span id="userMessagesBadge" class="absolute top-2 right-2 w-3 h-3 bg-red-500 rounded-full hide"></span>
        </button>
      </div>
      <button data-close-modal class="w-full mt-4 bg-gray-400 text-white py-3 rounded-lg font-semibold">Close</button>
    </div>
  </div>

  <!-- Admin Users Modal -->
  <div id="adminUsersModal" class="modal hide">
    <div class="modal-content" style="max-width: 480px; max-height: 90vh; overflow-y: auto;">
      <h2 class="text-xl font-bold mb-4 text-gray-800">Manage Users</h2>
      <div class="mb-4">
        <div class="flex items-center gap-2">
          <input type="text" id="userSearch" placeholder="Search users..."
            class="flex-1 p-3 border border-gray-300 rounded-lg">
          <button id="userClearBtn"
            class="hide bg-white text-white p-3 rounded-lg hover:bg-gray-100 transition flex-shrink-0">
            <img src="svgs/icon-close.svg" alt="Clear" style="width: 20px; height: 20px;">
          </button>
        </div>
      </div>
      <div id="usersList" class="space-y-2 mb-4"></div>
      <button data-close-modal class="w-full bg-gray-400 text-white py-3 rounded-lg font-semibold">Close</button>
    </div>
  </div>

  <!-- Role Change Confirmation Modal -->
  <div id="roleConfirmModal" class="modal hide">
    <div class="modal-content" style="max-width: 500px;">
      <h2 class="text-xl font-bold mb-4 text-gray-800">Confirm Role Change</h2>
      <p class="text-gray-700 mb-4">Are you sure you want to change this user's role?</p>
      <div class="flex gap-2">
        <button id="roleConfirmYes"
          class="flex-1 bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition">Yes,
          Continue</button>
        <button id="roleConfirmNo"
          class="flex-1 bg-gray-400 text-white py-3 rounded-lg font-semibold hover:bg-gray-500 transition">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Role Change Consequences Modal -->
  <div id="roleConsequencesModal" class="modal hide">
    <div class="modal-content" style="max-width: 500px;">
      <h2 class="text-xl font-bold mb-4 text-red-600">‚ö†Ô∏è Important: Understand the Consequences</h2>
      <div id="roleConsequencesText" class="text-gray-700 mb-4 space-y-2"></div>
      <div class="flex gap-2">
        <button id="roleConsequencesConfirm"
          class="flex-1 bg-red-600 text-white py-3 rounded-lg font-semibold hover:bg-red-700 transition">I Understand,
          Proceed</button>
        <button id="roleConsequencesCancel"
          class="flex-1 bg-gray-400 text-white py-3 rounded-lg font-semibold hover:bg-gray-500 transition">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Note View Modal (Read-only) -->
  <div id="noteViewModal" class="modal hide">
    <div class="modal-content" style="max-width: 480px; max-height: 90vh; overflow-y: auto;">
      <div class="flex justify-between items-center mb-4 pb-3 border-b border-gray-200">
        <div>
          <h2 id="noteViewTitle" class="text-xl font-bold text-gray-800"></h2>
          <div id="noteViewDate" class="text-sm text-gray-500 mt-1"></div>
        </div>
        <div class="flex gap-2">
          <button id="editNoteBtn" class="bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 transition">
            <img src="svgs/icon-edit.svg" style="width: 20px; height: 20px;">
          </button>
          <button id="deleteNoteViewBtn" class="bg-red-600 text-white p-2 rounded-lg hover:bg-red-700 transition">
            <img src="svgs/icon-delete.svg" style="width: 20px; height: 20px;">
          </button>
        </div>
      </div>
      <div id="noteViewContent" class="text-gray-700 whitespace-pre-wrap"></div>
      <button data-close-modal class="w-full mt-4 bg-gray-400 text-white py-3 rounded-lg font-semibold">Close</button>
    </div>
  </div>

  <!-- Note Edit Modal -->
  <div id="noteEditModal" class="modal hide">
    <div class="modal-content">
      <!-- Editable Title and Date Bar -->
      <div class="flex justify-between items-center px-4 py-3 border-b border-gray-200 bg-gray-50">
        <div class="flex-1">
          <input type="text" id="noteTitleInput" placeholder="Untitled" class="text-xl font-bold text-gray-800 bg-transparent border-none outline-none w-full focus:bg-white focus:px-2 focus:py-1 rounded" maxlength="100">
          <input type="date" id="noteDateInput" class="text-sm text-gray-500 mt-1 bg-transparent border-none outline-none cursor-pointer hover:bg-white hover:px-2 hover:py-1 rounded" required>
        </div>
        <div class="flex gap-2">
          <button type="button" id="saveNoteBtn" class="bg-green-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-700 transition">Save</button>
          <button type="button" id="deleteNoteEditBtn" class="bg-red-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-red-700 transition hide">Delete</button>
        </div>
      </div>   
      
      <form id="noteEditForm">
        <input type="hidden" id="noteEditId">
        <div class="note-editor-wrapper px-4 py-4">
          <div 
            id="noteContentInput" 
            class="modal-input border border-gray-300" 
            contenteditable="true"
            placeholder="Write your note here..." 
            style="min-height: 300px; font-family: inherit; outline: none; cursor: text; white-space: pre-wrap; overflow-y: auto;" 
            required
          ></div>
        </div>
        <div class="flex gap-2 px-4 pb-4">
          <button type="button" id="noteCancelBtn" class="flex-1 bg-gray-400 text-white py-3 rounded-lg font-semibold">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Create/Edit Notification Modal -->
  <div id="notificationModal" class="modal hide">
    <div class="modal-content" style="max-width: 480px;">
      <h2 class="text-xl font-bold mb-4 text-gray-800" id="notificationModalTitle">Create Notification</h2>
      <form id="notificationForm">
        <input type="hidden" id="notificationId">
        <input type="text" id="notificationTitle" placeholder="Title" class="modal-input" required>
        <textarea id="notificationContent" placeholder="Message" class="modal-input h-32" required></textarea>
        <select id="notificationTarget" class="modal-input" required>
          <option value="" disabled selected>Select Target Audience</option>
          <option value="all">All Users</option>
          <option value="student">Students Only</option>
        </select>
        <div class="flex gap-2 mt-4">
          <button type="submit" class="flex-1 bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700 transition">Send</button>
          <button type="button" data-close-modal class="flex-1 bg-gray-400 text-white py-3 rounded-lg font-semibold hover:bg-gray-500 transition">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Notes Access Denied Modal -->
  <div id="notesAccessDeniedModal" class="modal hide">
    <div class="modal-content" style="max-width: 400px;">
      <h2 class="text-xl font-bold mb-4 text-orange-600">‚ö†Ô∏è Access Restricted</h2>
<p class="text-gray-700 mb-4">
  You need at least <strong>student access</strong> to upload your notes to the cloud.  
  You can request access by sending an email to  
  <a 
    href="mailto:abidashrafkhulna@gmail.com?subject=Request%20for%20Student%20Access&body=I%20would%20like%20to%20request%20student%20access%20to%20upload%20my%20notes%20to%20the%20cloud."
    class="text-blue-600 hover:underline"
  >
    abidashrafkhulna@gmail.com
  </a>.
</p>

<p class="text-gray-700 mb-4" style="direction: rtl; text-align: right;">
  ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡ßã‡¶ü ‡¶ï‡ßç‡¶≤‡¶æ‡¶â‡¶°‡ßá ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶Ö‡¶®‡ßç‡¶§‡¶§ <strong>‡¶∏‡ßç‡¶ü‡ßÅ‡¶°‡ßá‡¶®‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏</strong> ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡•§  
  ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡ßç‡¶ü‡ßÅ‡¶°‡ßá‡¶®‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶® ‚Äî  
  <a 
    href="mailto:abidashrafkhulna@gmail.com?subject=‡¶∏‡ßç‡¶ü‡ßÅ‡¶°‡ßá‡¶®‡ßç‡¶ü%20‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏%20‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü&body=I%20would%20like%20to%20request%20student%20access%20to%20upload%20my%20notes%20to%20the%20cloud."
    class="text-blue-600 hover:underline"
  >
    abidashrafkhulna@gmail.com
  </a>‡•§
</p>

      <button data-close-modal class="w-full bg-gray-400 text-white py-3 rounded-lg font-semibold hover:bg-gray-500 transition">Close</button>
    </div>
  </div>

  <!-- Unsaved Changes Warning Modal -->
  <div id="unsavedChangesModal" class="modal hide">
    <div class="modal-content" style="max-width: 400px;">
      <h2 class="text-xl font-bold mb-4 text-orange-600">‚ö†Ô∏è Unsaved Changes</h2>
      <p class="text-gray-700 mb-4">You have unsaved changes. Are you sure you want to close without saving?</p>
      <div class="flex gap-2">
        <button id="discardChangesBtn" class="flex-1 bg-red-600 text-white py-3 rounded-lg font-semibold hover:bg-red-700 transition">Discard</button>
        <button id="keepEditingBtn" class="flex-1 bg-gray-400 text-white py-3 rounded-lg font-semibold hover:bg-gray-500 transition">Keep Editing</button>
      </div>
    </div>
  </div>

  <!-- Compose Message Modal -->
  <div id="composeMessageModal" class="modal hide">
    <div class="modal-content" style="max-width: 480px;">
      <h2 class="text-xl font-bold mb-4 text-gray-800">Message Admin</h2>
      <form id="composeMessageForm">
        <label class="block font-semibold text-gray-700 mb-2">Subject *</label>
        <select id="messageSubject" class="modal-input mb-4" required>
          <option value="" disabled selected>Select a subject</option>
          <option value="Add my donation to the list">Add my donation to the list</option>
          <option value="Remove the admin blood donor account with my name">Remove the admin blood donor account with my name</option>
          <option value="Suggest a feature">Suggest a feature</option>
          <option value="Other">Other</option>
        </select>
        
        <div id="customSubjectSection" class="hide mb-4">
          <input type="text" id="customSubject" class="modal-input" placeholder="Enter your subject">
        </div>

        <label class="block font-semibold text-gray-700 mb-2">Message (Optional)</label>
        <textarea id="messageContent" class="modal-input h-32 mb-4" placeholder="Type your message here..."></textarea>

        <div class="flex gap-2">
          <button type="submit" class="flex-1 bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700 transition">Send</button>
          <button type="button" data-close-modal class="flex-1 bg-gray-400 text-white py-3 rounded-lg font-semibold hover:bg-gray-500 transition">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <!-- View User Message Modal (for users) -->
  <div id="viewUserMessageModal" class="modal hide">
    <div class="modal-content" style="max-width: 480px; max-height: 90vh; overflow-y: auto;">
      <div class="border-b border-gray-200 pb-3 mb-3">
        <h2 id="viewMessageSubject" class="text-xl font-bold text-gray-800 mb-1"></h2>
        <div id="viewMessageTimestamp" class="text-sm text-gray-500"></div>
      </div>
      <div id="viewMessageContent" class="text-gray-700 mb-4 whitespace-pre-wrap"></div>
      <div id="viewMessageReply"></div>
      <button data-close-modal class="w-full mt-4 bg-gray-400 text-white py-3 rounded-lg font-semibold">Close</button>
    </div>
  </div>

  <!-- View Admin Message Modal (for admins) -->
  <div id="adminViewMessageModal" class="modal hide">
    <div class="modal-content" style="max-width: 480px; max-height: 90vh; overflow-y: auto;">
      <div class="border-b border-gray-200 pb-3 mb-3">
        <div class="text-sm text-gray-600 mb-1">From: <span id="adminViewMessageFrom" class="font-semibold"></span></div>
        <h2 id="adminViewMessageSubject" class="text-xl font-bold text-gray-800 mb-1"></h2>
        <div id="adminViewMessageTimestamp" class="text-sm text-gray-500"></div>
      </div>
      <div id="adminViewMessageContent" class="text-gray-700 mb-4 whitespace-pre-wrap"></div>
      <div id="adminReplySection"></div>
      <button data-close-modal class="w-full mt-4 bg-gray-400 text-white py-3 rounded-lg font-semibold">Close</button>
    </div>
  </div>

  <!-- Notes Close Confirmation Modal -->
  <div id="noteCloseConfirmModal" class="modal hide">
    <div class="modal-content" style="max-width: 400px;">
      <h2 class="text-xl font-bold mb-4 text-gray-800">Close Note?</h2>
      <p class="text-gray-600 mb-6">There might be unsaved changes.</p>
      <div class="flex gap-3">
        <button id="noteCloseSaveBtn" class="flex-1 bg-green-600 text-white py-3 rounded-lg font-medium hover:bg-green-700 transition">Save</button>
        <button id="noteCloseDiscardBtn" class="flex-1 bg-gray-500 text-white py-3 rounded-lg font-medium hover:bg-gray-600 transition">Discard</button>
      </div>
    </div>
  </div>

  <!-- Formatting Guide Modal -->
  <div id="formattingGuideModal" class="modal hide">
    <div class="modal-content" style="max-width: 500px; max-height: 90vh; overflow-y: auto;">
      <h2 class="text-xl font-bold mb-4 text-gray-800">Formatting Guide</h2>
      <div class="space-y-4 text-sm">
        <div class="bg-gray-50 p-3 rounded-lg">
          <p class="font-semibold mb-2">Bold Text</p>
          <p class="text-gray-600 mb-1">Wrap text with asterisks: <code class="bg-white px-2 py-1 rounded">*text*</code></p>
          <p class="text-gray-500">Example: <strong>bold text</strong></p>
        </div>
        
        <div class="bg-gray-50 p-3 rounded-lg">
          <p class="font-semibold mb-2">Italic Text</p>
          <p class="text-gray-600 mb-1">Wrap text with plus signs: <code class="bg-white px-2 py-1 rounded">+text+</code></p>
          <p class="text-gray-500">Example: <em>italic text</em></p>
        </div>
        
        <div class="bg-gray-50 p-3 rounded-lg">
          <p class="font-semibold mb-2">Underlined Text</p>
          <p class="text-gray-600 mb-1">Wrap text with underscores: <code class="bg-white px-2 py-1 rounded">_text_</code></p>
          <p class="text-gray-500">Example: <span style="text-decoration: underline;">underlined text</span></p>
        </div>
        
        <div class="bg-gray-50 p-3 rounded-lg">
          <p class="font-semibold mb-2">Red Text</p>
          <p class="text-gray-600 mb-1">Wrap text with percent signs: <code class="bg-white px-2 py-1 rounded">%text%</code></p>
          <p class="text-gray-500">Example: <span style="color: #dc2626;">red text</span></p>
        </div>
        
        <div class="bg-gray-50 p-3 rounded-lg">
          <p class="font-semibold mb-2">Numbered Lists</p>
          <p class="text-gray-600 mb-2">Start with <code class="bg-white px-2 py-1 rounded">#(num)</code> and end with <code class="bg-white px-2 py-1 rounded">#</code></p>
          <pre class="bg-white p-2 rounded text-xs mb-2">#(num)
text 1
text 2
text 3
#</pre>
          <p class="text-gray-600 mb-1">Options:</p>
          <ul class="text-xs text-gray-500 ml-4 space-y-1">
            <li><code class="bg-white px-1 rounded">t=1</code> for 1,2,3 (default)</li>
            <li><code class="bg-white px-1 rounded">t=a</code> for a,b,c</li>
            <li><code class="bg-white px-1 rounded">t=i</code> for i,ii,iii</li>
            <li><code class="bg-white px-1 rounded">t=I</code> for I,II,III</li>
            <li><code class="bg-white px-1 rounded">t=bn</code> for Bengali</li>
            <li><code class="bg-white px-1 rounded">s=3</code> to start at 3</li>
          </ul>
          <p class="text-xs text-gray-500 mt-2">Example: <code class="bg-white px-1 rounded">#(num, t=I, s=3)</code></p>
        </div>
        
        <div class="bg-gray-50 p-3 rounded-lg">
          <p class="font-semibold mb-2">Bullet Lists</p>
          <p class="text-gray-600 mb-2">Start with <code class="bg-white px-2 py-1 rounded">#(bul)</code> and end with <code class="bg-white px-2 py-1 rounded">#</code></p>
          <pre class="bg-white p-2 rounded text-xs mb-2">#(bul)
text 1
text 2
text 3
#</pre>
          <p class="text-gray-600 mb-1">Options:</p>
          <ul class="text-xs text-gray-500 ml-4 space-y-1">
            <li><code class="bg-white px-1 rounded">t=sq</code> for square ‚ñ†</li>
            <li><code class="bg-white px-1 rounded">t=di</code> for disk ‚óè (default)</li>
            <li><code class="bg-white px-1 rounded">t=ci</code> for circle ‚óã</li>
            <li><code class="bg-white px-1 rounded">t=ar</code> for arrow ‚Üí</li>
          </ul>
        </div>
      </div>
      <button data-close-modal class="w-full mt-4 bg-gray-400 text-white py-3 rounded-lg font-semibold">Close</button>
    </div>
  </div>

  <!-- About Modal -->
  <div id="aboutModal" class="modal hide">
    <div class="modal-content">
      <h2 class="text-xl font-bold mb-4 text-gray-800">About Esho Obodan Rakhi</h2>
      <p class="text-gray-700 mb-4">Placeholder content about the organization and its mission...</p>
      <button data-close-modal class="w-full bg-gray-400 text-white py-3 rounded-lg font-semibold">Close</button>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="modal hide">
    <div class="modal-content">
      <h2 class="text-xl font-bold mb-4 text-gray-800">Settings</h2>
      <div class="flex items-center justify-between mb-4">
        <span class="font-semibold text-gray-700">Bengali Mode</span>
        <label class="flex items-center cursor-pointer">
          <input type="checkbox" id="bengaliModeToggle" class="mr-2 w-5 h-5">
          <span class="text-gray-700">Enable</span>
        </label>
      </div>
      <button id="loginBtn"
        class="w-full bg-green-600 text-white py-3 rounded-lg font-semibold mb-2 hide">Login</button>
      <button id="logoutBtn"
        class="w-full bg-red-600 text-white py-3 rounded-lg font-semibold mb-2 hide">Logout</button>
      <button data-close-modal class="w-full bg-gray-400 text-white py-3 rounded-lg font-semibold">Close</button>
    </div>
  </div>

  <script src="js/main.js"></script>
  <script id="activities" src="js/activities.js"></script>
  <script id="notes" src="js/notes.js"></script>
  <script id="blood" src="js/blood.js"></script>
  <script id="auth" src="js/auth.js"></script>
  <script id="fund" src="js/fund.js"></script>
  <script id="notifications" src="js/notifications.js"></script>
  <script id="messages" src="js/messages.js"></script>
</body>

</html>

<!--
We are really sorry that¬†we had to remove your blood donor profile.
This is a organization for our brothers from deen, brothers from islam. Here having a female blood donor account can raise many controversies.

Also, your name and your phone number is public, for most men it is not a big deal. But for a woman it can lead to data leak and harassment and we really do not want any of it happening, and more importantly we don't wanna be a medium for it.
Hope you understand. Thank you anyways for considering to create a blood donor account and leave your contribution to the society.
-->